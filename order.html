<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <title>Objednávka</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>Vyplň údaje k objednávce</h1>

  <form id="orderForm">
    <label>
      Jméno:
      <input type="text" name="name" required />
    </label>
    <label>
      Příjmení:
      <input type="text" name="surname" required />
    </label>
    <label>
      E-mail:
      <input type="email" name="email" required />
    </label>
    <label>
      Adresa doručení:
      <textarea name="address" required></textarea>
    </label>
    <label>
      Platební metoda:
      <select name="payment" required>
        <option value="">Vyberte</option>
        <option value="dobirka">Dobírka</option>
        <option value="prevod">Bankovní převod</option>
        <option value="kartou">Platba kartou</option>
      </select>
    </label>
    <button type="submit">Potvrdit objednávku</button>
  </form>

  <script>
    const cart = JSON.parse(sessionStorage.getItem("cart") || "[]");

    if (!cart.length) {
      alert("Košík je prázdný, vraťte se na hlavní stránku.");
      window.location.href = "index.html";
    }

    document.getElementById("orderForm").onsubmit = (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const data = {};
      formData.forEach((v, k) => (data[k] = v));

      // Pro ukázku - zpracování objednávky zde (např. odeslat na backend)
      console.log("Objednávka:", data, cart);

      alert(
        "Souhrn objednávky a údaje k platbě byly odeslány na váš e-mail.\n\n" +
          "Děkujeme za nákup!"
      );
      sessionStorage.removeItem("cart");
      window.location.href = "index.html";
    };
  </script>
</body>
</html>
